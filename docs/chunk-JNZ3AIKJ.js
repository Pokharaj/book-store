import{a as A,b as G}from"./chunk-JUGDZW3R.js";import"./chunk-BZIHYYEO.js";import{a as F,b as $,e as M}from"./chunk-ZYO6VNKS.js";import"./chunk-UTOG7DYV.js";import{a as H}from"./chunk-SPORWBVK.js";import{a as j,b as R,f as V}from"./chunk-K6IU7W3E.js";import{m as L,o as Q,p as y}from"./chunk-DJ67HNH7.js";import{R as U,S as Y,b as q,c as T,d as N,e as _,p as D,r as b}from"./chunk-XGMFNALE.js";import{$a as w,$b as E,Ab as S,Eb as u,Gb as p,Nb as k,Oa as c,Rb as r,Sb as h,Ta as O,Tb as C,V as P,_a as v,_b as z,ac as B,ca as x,da as f,db as l,rb as s,sb as e,tb as i,ub as I}from"./chunk-4B3ET35P.js";function W(o,n){if(o&1&&(e(0,"span",10),r(1),i()),o&2){let t=p();c(),C("(",t.getTotalItems()," items)")}}function X(o,n){if(o&1){let t=S();e(0,"div",13)(1,"div",14)(2,"div",15)(3,"mat-icon",16),r(4,"menu_book"),i(),e(5,"div",17)(6,"div",18),r(7),i(),e(8,"div",19),r(9),z(10,"number"),i(),e(11,"div",20),r(12),i()()(),e(13,"div",21)(14,"div",22)(15,"button",23),u("click",function(){let m=x(t).$implicit,d=p(2);return f(d.decrementQuantity(m))}),e(16,"mat-icon"),r(17,"remove"),i()(),e(18,"span",24),r(19),i(),e(20,"button",25),u("click",function(){let m=x(t).$implicit,d=p(2);return f(d.incrementQuantity(m))}),e(21,"mat-icon"),r(22,"add"),i()(),e(23,"button",26),u("click",function(){let m=x(t).$implicit,d=p(2);return f(d.removeFromCart(m))}),e(24,"mat-icon"),r(25,"delete"),i(),e(26,"span",27),r(27,"Remove"),i()()()()()()}if(o&2){let t=n.$implicit;c(7),h(t.title||"Unknown Book"),c(2),C("$",E(10,4,(t.price==null?null:t.price.amount)||0,"1.2-2")," each"),c(3),C("ISBN: ",t.ISBN||"N/A"),c(7),h(t.quantity||0)}}function Z(o,n){if(o&1&&(e(0,"div",11),l(1,X,28,7,"div",12),i()),o&2){let t=p();c(),s("ngForOf",t.cartItems)}}function tt(o,n){o&1&&(e(0,"div",28)(1,"mat-icon",29),r(2,"shopping_cart_outlined"),i(),e(3,"div",30),r(4,"Your cart is empty."),i(),e(5,"div",31)(6,"button",32)(7,"mat-icon"),r(8,"store"),i(),e(9,"span"),r(10,"Browse Books"),i()()()())}function et(o,n){if(o&1&&(e(0,"div",33)(1,"div",34)(2,"mat-icon",35),r(3,"shopping_cart"),i(),e(4,"div",36)(5,"span",37),r(6,"Total Items:"),i(),e(7,"span",38)(8,"strong"),r(9),i()()()()()),o&2){let t=p();c(9),h(t.getTotalItems())}}function nt(o,n){o&1&&(e(0,"div",39)(1,"button",40)(2,"mat-icon"),r(3,"arrow_back"),i(),e(4,"span"),r(5,"Continue Shopping"),i()(),e(6,"button",41)(7,"mat-icon"),r(8,"shopping_cart_checkout"),i(),e(9,"span"),r(10,"Proceed to Checkout"),i()()())}var g=class o{constructor(n,t){this.snackBar=n;this.cartService=t}cartItems=[];cartSubscription;ngOnInit(){this.loadCartItems(),this.cartSubscription=this.cartService.cartCount$.subscribe(()=>{this.loadCartItems()})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}loadCartItems(){try{this.cartItems=this.cartService.getCart(),console.log("Cart items loaded:",this.cartItems)}catch(n){console.error("Error loading cart items:",n),this.cartItems=[]}}getCart(){return this.cartService.getCart()}setCart(n){try{this.cartService.setCart(n),this.cartItems=this.getCart(),console.log("Cart updated:",this.cartItems)}catch(t){console.error("Error setting cart:",t),this.snackBar.open("Error updating cart","Close",{duration:3e3})}}removeFromCart(n){try{let t=this.getCart();this.cartItems=t.filter(a=>a.ISBN!==n.ISBN),this.setCart(this.cartItems),this.snackBar.open(`${n.title} removed from cart!`,"Close",{duration:2e3})}catch(t){console.error("Error removing item from cart:",t),this.snackBar.open("Error removing item from cart","Close",{duration:3e3})}}incrementQuantity(n){try{let t=this.getCart(),a=t.findIndex(m=>m.ISBN===n.ISBN);a>-1&&(t[a].quantity+=1,this.setCart(t),this.snackBar.open(`Increased quantity of ${n.title}`,"Close",{duration:1500}))}catch(t){console.error("Error incrementing quantity:",t),this.snackBar.open("Error updating quantity","Close",{duration:3e3})}}decrementQuantity(n){try{let t=this.getCart(),a=t.findIndex(m=>m.ISBN===n.ISBN);a>-1&&(t[a].quantity>1?(t[a].quantity-=1,this.setCart(t),this.snackBar.open(`Decreased quantity of ${n.title}`,"Close",{duration:1500})):this.removeFromCart(n))}catch(t){console.error("Error decrementing quantity:",t),this.snackBar.open("Error updating quantity","Close",{duration:3e3})}}getTotalItems(){try{return this.cartItems.reduce((n,t)=>n+(t.quantity||0),0)}catch(n){return console.error("Error calculating total items:",n),0}}debugCart(){console.log("Current cart items:",this.cartItems),console.log("Cart from service:",this.cartService.getCart()),console.log("Total items:",this.getTotalItems())}static \u0275fac=function(t){return new(t||o)(O(A),O(H))};static \u0275cmp=v({type:o,selectors:[["app-cart"]],decls:14,vars:5,consts:[["emptyCart",""],[1,"cart-container"],[1,"cart-title"],["color","primary",1,"cart-icon"],["class","cart-count-badge",4,"ngIf"],[1,"cart-divider"],[1,"cart-content"],["class","cart-list",4,"ngIf","ngIfElse"],["class","cart-summary",4,"ngIf"],["class","cart-actions",4,"ngIf"],[1,"cart-count-badge"],[1,"cart-list"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],[1,"cart-item-content"],[1,"item-info"],["color","primary",1,"cart-book-icon"],[1,"item-details"],[1,"cart-item-title"],[1,"item-price"],[1,"item-isbn"],[1,"item-controls"],[1,"cart-item-qty"],["mat-mini-fab","","color","primary","aria-label","Decrease quantity",1,"qty-btn",3,"click"],[1,"cart-qty-number"],["mat-mini-fab","","color","primary","aria-label","Increase quantity",1,"qty-btn",3,"click"],["mat-button","","color","accent",1,"remove-btn",3,"click"],[1,"btn-text"],[1,"empty-cart"],["color","disabled",1,"empty-cart-icon"],[1,"empty-cart-msg"],[1,"cart-empty-actions"],["mat-raised-button","","color","accent","routerLink","/",1,"browse-btn"],[1,"cart-summary"],[1,"summary-content"],["color","accent",1,"summary-icon"],[1,"summary-text"],[1,"summary-label"],[1,"summary-value"],[1,"cart-actions"],["mat-button","","color","accent","routerLink","/",1,"action-btn"],["mat-raised-button","","color","primary","routerLink","/checkout",1,"action-btn","checkout-btn"]],template:function(t,a){if(t&1&&(e(0,"mat-card",1)(1,"mat-card-title",2)(2,"mat-icon",3),r(3,"shopping_cart"),i(),e(4,"span"),r(5,"Shopping Cart"),i(),l(6,W,2,1,"span",4),i(),I(7,"mat-divider",5),e(8,"div",6),l(9,Z,2,1,"div",7)(10,tt,11,0,"ng-template",null,0,B),i(),l(12,et,10,1,"div",8)(13,nt,11,0,"div",9),i()),t&2){let m=k(11);c(6),s("ngIf",a.cartItems.length>0),c(3),s("ngIf",a.cartItems.length>0)("ngIfElse",m),c(3),s("ngIf",a.cartItems.length>0),c(),s("ngIf",a.cartItems.length>0)}},dependencies:[M,F,V,j,R,y,L,Q,b,D,_,q,T,G,Y,U,$,N],styles:[".cart-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;border-radius:20px;overflow:hidden;box-shadow:0 10px 40px #0000004d;background-color:#1e293b;color:#f1f5f9;border:1px solid rgba(255,255,255,.05)}.cart-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:32px 32px 20px;font-size:2rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#0f172a,#1e293b);flex-wrap:wrap;letter-spacing:-.5px;border-bottom:1px solid rgba(255,255,255,.05)}.cart-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#3b82f6}.cart-count-badge[_ngcontent-%COMP%]{font-size:1rem;color:#94a3b8;font-weight:600;margin-left:auto;background:#3b82f61a;padding:6px 16px;border-radius:20px}.cart-divider[_ngcontent-%COMP%]{margin:0}.cart-content[_ngcontent-%COMP%]{padding:0}.debug-info[_ngcontent-%COMP%]{background:#ffffff0d!important;border:1px solid var(--border-color);margin:12px!important;padding:12px!important;border-radius:6px;font-size:.85rem;color:var(--text-secondary-color)}.cart-list[_ngcontent-%COMP%]{padding:0}.cart-item[_ngcontent-%COMP%]{padding:24px 32px;min-height:auto;border-bottom:1px solid rgba(255,255,255,.05);background:linear-gradient(135deg,#3b82f608,#8b5cf608);transition:all .3s ease}.cart-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f614,#8b5cf614);transform:translate(4px)}.cart-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.cart-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px;width:100%}.item-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1}.cart-book-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;flex-shrink:0}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.cart-item-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#fff;margin-bottom:8px;line-height:1.3;word-wrap:break-word}.item-price[_ngcontent-%COMP%]{font-size:1.1rem;color:#ffd740;font-weight:700;margin-bottom:4px}.item-isbn[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary-color);font-style:italic}.item-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;align-items:center;flex-shrink:0;flex:none}.cart-item-qty[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.qty-btn[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;min-height:36px}.cart-qty-number[_ngcontent-%COMP%]{min-width:40px;text-align:center;font-size:1rem;font-weight:600;color:var(--text-color);background:#ffffff0d;padding:8px 12px;border-radius:6px;border:2px solid var(--border-color)}.remove-btn[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;gap:6px;font-weight:600;color:#ffd740}.btn-text[_ngcontent-%COMP%]{font-size:.9rem}.item-divider[_ngcontent-%COMP%]{margin:0 24px}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 24px;text-align:center}.empty-cart-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5;color:var(--text-secondary-color)}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-secondary-color);margin-bottom:24px;font-weight:500}.cart-empty-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.browse-btn[_ngcontent-%COMP%]{height:48px;font-size:1rem;font-weight:600;display:flex;align-items:center;gap:8px;padding:0 24px}.cart-summary[_ngcontent-%COMP%]{padding:24px 32px;background:linear-gradient(135deg,#3b82f61a,#8b5cf61a);border-top:1px solid rgba(255,255,255,.08)}.summary-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.summary-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.summary-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.summary-label[_ngcontent-%COMP%]{font-size:1.1rem;color:#94a3b8;font-weight:600}.summary-value[_ngcontent-%COMP%]{font-size:1.3rem;color:#fff;font-weight:700}.cart-actions[_ngcontent-%COMP%]{display:flex;gap:16px;padding:32px;background:#0003;border-top:1px solid rgba(255,255,255,.05)}.action-btn[_ngcontent-%COMP%]{flex:1;height:52px;font-size:1.05rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:10px;border-radius:12px;transition:all .3s ease}.checkout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);box-shadow:0 4px 12px #3b82f64d}.checkout-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #3b82f666}@media (max-width: 768px){.cart-container[_ngcontent-%COMP%]{margin:16px auto;border-radius:8px}.cart-title[_ngcontent-%COMP%]{padding:20px 20px 12px;font-size:1.3rem;gap:8px}.cart-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.cart-count-badge[_ngcontent-%COMP%]{font-size:.8rem;margin-left:0;width:100%;text-align:center;margin-top:4px}.debug-info[_ngcontent-%COMP%]{margin:8px!important;padding:8px!important;font-size:.8rem}.cart-item[_ngcontent-%COMP%]{padding:16px;min-height:auto}.cart-item-content[_ngcontent-%COMP%], .item-info[_ngcontent-%COMP%]{gap:12px}.cart-book-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.cart-item-title[_ngcontent-%COMP%]{font-size:1rem}.item-price[_ngcontent-%COMP%]{font-size:.85rem}.item-isbn[_ngcontent-%COMP%]{font-size:.75rem}.item-controls[_ngcontent-%COMP%]{gap:10px}.qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px;min-height:32px}.cart-qty-number[_ngcontent-%COMP%]{min-width:36px;font-size:.95rem;padding:6px 10px}.remove-btn[_ngcontent-%COMP%]{height:36px;font-size:.9rem}.item-divider[_ngcontent-%COMP%]{margin:0 20px}.empty-cart[_ngcontent-%COMP%]{padding:40px 20px}.empty-cart-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:20px}.browse-btn[_ngcontent-%COMP%]{height:44px;font-size:.95rem;padding:0 20px}.cart-summary[_ngcontent-%COMP%]{padding:16px 20px}.summary-content[_ngcontent-%COMP%]{gap:10px}.summary-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.summary-label[_ngcontent-%COMP%]{font-size:.95rem}.summary-value[_ngcontent-%COMP%]{font-size:1rem}.cart-actions[_ngcontent-%COMP%]{flex-direction:column;gap:10px;padding:20px}.action-btn[_ngcontent-%COMP%]{height:44px;font-size:.95rem}}@media (max-width: 480px){.cart-container[_ngcontent-%COMP%]{margin:12px auto;border-radius:6px}.cart-title[_ngcontent-%COMP%]{padding:16px 16px 10px;font-size:1.2rem;gap:6px}.cart-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}.cart-count-badge[_ngcontent-%COMP%]{font-size:.75rem}.cart-item[_ngcontent-%COMP%]{padding:12px;min-height:auto}.cart-item-content[_ngcontent-%COMP%], .item-info[_ngcontent-%COMP%]{gap:10px}.cart-book-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.cart-item-title[_ngcontent-%COMP%]{font-size:.95rem}.item-price[_ngcontent-%COMP%]{font-size:.8rem}.item-isbn[_ngcontent-%COMP%]{font-size:.7rem}.item-controls[_ngcontent-%COMP%]{gap:8px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px;min-height:28px}.cart-qty-number[_ngcontent-%COMP%]{min-width:32px;font-size:.9rem;padding:4px 8px}.remove-btn[_ngcontent-%COMP%]{height:32px;font-size:.85rem}.btn-text[_ngcontent-%COMP%]{font-size:.85rem}.item-divider[_ngcontent-%COMP%]{margin:0 16px}.empty-cart[_ngcontent-%COMP%]{padding:30px 16px}.empty-cart-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;margin-bottom:10px}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:16px}.browse-btn[_ngcontent-%COMP%]{height:40px;font-size:.9rem;padding:0 16px}.cart-summary[_ngcontent-%COMP%]{padding:12px 16px}.summary-content[_ngcontent-%COMP%]{gap:8px}.summary-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.summary-label[_ngcontent-%COMP%]{font-size:.9rem}.summary-value[_ngcontent-%COMP%]{font-size:.95rem}.cart-actions[_ngcontent-%COMP%]{padding:16px;gap:8px}.action-btn[_ngcontent-%COMP%]{height:40px;font-size:.9rem}}@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape){.item-controls[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.cart-item[_ngcontent-%COMP%]{min-height:180px}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){.cart-container[_ngcontent-%COMP%]{box-shadow:0 2px 10px #0000004d}}"]})};var it=[{path:"",component:g}],J=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=P({imports:[_,b.forChild(it),M,y,g]})};export{J as CartModule};
