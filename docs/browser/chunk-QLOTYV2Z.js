import{d as H,e as J}from"./chunk-43PKIYTO.js";import{a as F,b as $,c as L,d as j,e as b}from"./chunk-EG4GZIH6.js";import"./chunk-SJFBDICB.js";import{a as K}from"./chunk-DR5ZIOY5.js";import{g as R,h as V,l as Q,n as U,p as A,q as y}from"./chunk-N6URFKEL.js";import"./chunk-VSPJMY65.js";import{P as Y,Q as G,b as q,c as T,d as N,e as C,o as D,q as M}from"./chunk-KBEZJJI4.js";import{Ab as _,Bb as s,Ib as z,Ma as c,Mb as r,Nb as u,Ob as h,Ra as O,V as P,Vb as k,Wb as E,Xb as B,Ya as w,Za as I,bb as l,ca as x,da as f,ob as p,pb as n,qb as i,rb as v,xb as S}from"./chunk-2AP2YPDH.js";function Z(o,e){if(o&1&&(n(0,"span",10),r(1),i()),o&2){let t=s();c(),h("(",t.getTotalItems()," items)")}}function tt(o,e){o&1&&v(0,"mat-divider",29)}function et(o,e){if(o&1){let t=S();n(0,"mat-list-item",13)(1,"div",14)(2,"div",15)(3,"mat-icon",16),r(4,"menu_book"),i(),n(5,"div",17)(6,"div",18),r(7),i(),n(8,"div",19),r(9),k(10,"number"),i(),n(11,"div",20),r(12),i()()(),n(13,"div",21)(14,"div",22)(15,"button",23),_("click",function(){let m=x(t).$implicit,d=s(2);return f(d.decrementQuantity(m))}),n(16,"mat-icon"),r(17,"remove"),i()(),n(18,"span",24),r(19),i(),n(20,"button",25),_("click",function(){let m=x(t).$implicit,d=s(2);return f(d.incrementQuantity(m))}),n(21,"mat-icon"),r(22,"add"),i()(),n(23,"button",26),_("click",function(){let m=x(t).$implicit,d=s(2);return f(d.removeFromCart(m))}),n(24,"mat-icon"),r(25,"delete"),i(),n(26,"span",27),r(27,"Remove"),i()()()()(),l(28,tt,1,0,"mat-divider",28),i()}if(o&2){let t=e.$implicit,a=e.last;c(7),u(t.title||"Unknown Book"),c(2),h("$",E(10,5,(t.price==null?null:t.price.amount)||0,"1.2-2")," each"),c(3),h("ISBN: ",t.ISBN||"N/A"),c(7),u(t.quantity||0),c(9),p("ngIf",!a)}}function nt(o,e){if(o&1&&(n(0,"mat-list",11),l(1,et,29,8,"mat-list-item",12),i()),o&2){let t=s();c(),p("ngForOf",t.cartItems)}}function it(o,e){o&1&&(n(0,"div",30)(1,"mat-icon",31),r(2,"shopping_cart_outlined"),i(),n(3,"div",32),r(4,"Your cart is empty."),i(),n(5,"div",33)(6,"button",34)(7,"mat-icon"),r(8,"store"),i(),n(9,"span"),r(10,"Browse Books"),i()()()())}function rt(o,e){if(o&1&&(n(0,"div",35)(1,"div",36)(2,"mat-icon",37),r(3,"shopping_cart"),i(),n(4,"div",38)(5,"span",39),r(6,"Total Items:"),i(),n(7,"span",40)(8,"strong"),r(9),i()()()()()),o&2){let t=s();c(9),u(t.getTotalItems())}}function ot(o,e){o&1&&(n(0,"div",41)(1,"button",42)(2,"mat-icon"),r(3,"arrow_back"),i(),n(4,"span"),r(5,"Continue Shopping"),i()(),n(6,"button",43)(7,"mat-icon"),r(8,"shopping_cart_checkout"),i(),n(9,"span"),r(10,"Proceed to Checkout"),i()()())}var g=class o{constructor(e,t){this.snackBar=e;this.cartService=t}cartItems=[];cartSubscription;ngOnInit(){this.loadCartItems(),this.cartSubscription=this.cartService.cartCount$.subscribe(()=>{this.loadCartItems()})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}loadCartItems(){try{this.cartItems=this.cartService.getCart(),console.log("Cart items loaded:",this.cartItems)}catch(e){console.error("Error loading cart items:",e),this.cartItems=[]}}getCart(){return this.cartService.getCart()}setCart(e){try{this.cartService.setCart(e),this.cartItems=this.getCart(),console.log("Cart updated:",this.cartItems)}catch(t){console.error("Error setting cart:",t),this.snackBar.open("Error updating cart","Close",{duration:3e3})}}removeFromCart(e){try{let t=this.getCart();this.cartItems=t.filter(a=>a.ISBN!==e.ISBN),this.setCart(this.cartItems),this.snackBar.open(`${e.title} removed from cart!`,"Close",{duration:2e3})}catch(t){console.error("Error removing item from cart:",t),this.snackBar.open("Error removing item from cart","Close",{duration:3e3})}}incrementQuantity(e){try{let t=this.getCart(),a=t.findIndex(m=>m.ISBN===e.ISBN);a>-1&&(t[a].quantity+=1,this.setCart(t),this.snackBar.open(`Increased quantity of ${e.title}`,"Close",{duration:1500}))}catch(t){console.error("Error incrementing quantity:",t),this.snackBar.open("Error updating quantity","Close",{duration:3e3})}}decrementQuantity(e){try{let t=this.getCart(),a=t.findIndex(m=>m.ISBN===e.ISBN);a>-1&&(t[a].quantity>1?(t[a].quantity-=1,this.setCart(t),this.snackBar.open(`Decreased quantity of ${e.title}`,"Close",{duration:1500})):this.removeFromCart(e))}catch(t){console.error("Error decrementing quantity:",t),this.snackBar.open("Error updating quantity","Close",{duration:3e3})}}getTotalItems(){try{return this.cartItems.reduce((e,t)=>e+(t.quantity||0),0)}catch(e){return console.error("Error calculating total items:",e),0}}debugCart(){console.log("Current cart items:",this.cartItems),console.log("Cart from service:",this.cartService.getCart()),console.log("Total items:",this.getTotalItems())}static \u0275fac=function(t){return new(t||o)(O(H),O(K))};static \u0275cmp=w({type:o,selectors:[["app-cart"]],decls:14,vars:5,consts:[["emptyCart",""],[1,"cart-container"],[1,"cart-title"],["color","primary",1,"cart-icon"],["class","cart-count-badge",4,"ngIf"],[1,"cart-divider"],[1,"cart-content"],["class","cart-list",4,"ngIf","ngIfElse"],["class","cart-summary",4,"ngIf"],["class","cart-actions",4,"ngIf"],[1,"cart-count-badge"],[1,"cart-list"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],[1,"cart-item-content"],[1,"item-info"],["color","primary",1,"cart-book-icon"],[1,"item-details"],[1,"cart-item-title"],[1,"item-price"],[1,"item-isbn"],[1,"item-controls"],[1,"cart-item-qty"],["mat-mini-fab","","color","warn","aria-label","Decrease quantity",1,"qty-btn",3,"click"],[1,"cart-qty-number"],["mat-mini-fab","","color","warn","aria-label","Increase quantity",1,"qty-btn",3,"click"],["mat-button","","color","warn",1,"remove-btn",3,"click"],[1,"btn-text"],["class","item-divider",4,"ngIf"],[1,"item-divider"],[1,"empty-cart"],["color","disabled",1,"empty-cart-icon"],[1,"empty-cart-msg"],[1,"cart-empty-actions"],["mat-raised-button","","color","accent","routerLink","/",1,"browse-btn"],[1,"cart-summary"],[1,"summary-content"],["color","accent",1,"summary-icon"],[1,"summary-text"],[1,"summary-label"],[1,"summary-value"],[1,"cart-actions"],["mat-button","","color","accent","routerLink","/",1,"action-btn"],["mat-raised-button","","color","primary","routerLink","/checkout",1,"action-btn","checkout-btn"]],template:function(t,a){if(t&1&&(n(0,"mat-card",1)(1,"mat-card-title",2)(2,"mat-icon",3),r(3,"shopping_cart"),i(),n(4,"span"),r(5,"Shopping Cart"),i(),l(6,Z,2,1,"span",4),i(),v(7,"mat-divider",5),n(8,"div",6),l(9,nt,2,1,"mat-list",7)(10,it,11,0,"ng-template",null,0,B),i(),l(12,rt,10,1,"div",8)(13,ot,11,0,"div",9),i()),t&2){let m=z(11);c(6),p("ngIf",a.cartItems.length>0),c(3),p("ngIf",a.cartItems.length>0)("ngIfElse",m),c(3),p("ngIf",a.cartItems.length>0),c(),p("ngIf",a.cartItems.length>0)}},dependencies:[b,L,j,F,Q,R,V,y,U,A,M,D,C,q,T,J,G,Y,$,N],styles:[".cart-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000004d;background-color:var(--surface-color);color:var(--text-color)}.cart-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:24px 24px 16px;font-size:1.7rem;font-weight:700;color:var(--text-color);background:linear-gradient(135deg,var(--surface-color) 0%,var(--background-color) 100%);flex-wrap:wrap;text-shadow:0 2px 8px rgba(0,0,0,.3);letter-spacing:.5px;border-bottom:1px solid var(--border-color)}.cart-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.cart-count-badge[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary-color);font-weight:500;margin-left:auto}.cart-divider[_ngcontent-%COMP%]{margin:0}.cart-content[_ngcontent-%COMP%]{padding:0}.debug-info[_ngcontent-%COMP%]{background:#ffffff0d!important;border:1px solid var(--border-color);margin:12px!important;padding:12px!important;border-radius:6px;font-size:.85rem;color:var(--text-secondary-color)}.cart-list[_ngcontent-%COMP%]{padding:0}.cart-item[_ngcontent-%COMP%]{padding:20px 24px;min-height:200px;border-bottom:1px solid var(--border-color)}.cart-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.cart-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%}.item-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px}.cart-book-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;flex-shrink:0;margin-top:4px}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.cart-item-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:var(--text-color);margin-bottom:4px;line-height:1.3;word-wrap:break-word;text-shadow:0 1px 4px rgba(0,0,0,.2)}.item-price[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--accent-color);font-weight:600;margin-bottom:2px;text-shadow:0 1px 4px rgba(0,0,0,.2)}.item-isbn[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary-color);font-style:italic}.item-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;align-items:flex-start}.cart-item-qty[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.qty-btn[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;min-height:36px}.cart-qty-number[_ngcontent-%COMP%]{min-width:40px;text-align:center;font-size:1rem;font-weight:600;color:var(--text-color);background:#ffffff0d;padding:8px 12px;border-radius:6px;border:2px solid var(--border-color)}.remove-btn[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;gap:6px;font-weight:500;color:var(--warn-color)}.btn-text[_ngcontent-%COMP%]{font-size:.9rem}.item-divider[_ngcontent-%COMP%]{margin:0 24px}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 24px;text-align:center}.empty-cart-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5;color:var(--text-secondary-color)}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--text-secondary-color);margin-bottom:24px;font-weight:500}.cart-empty-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.browse-btn[_ngcontent-%COMP%]{height:48px;font-size:1rem;font-weight:600;display:flex;align-items:center;gap:8px;padding:0 24px}.cart-summary[_ngcontent-%COMP%]{padding:20px 24px;background:#ffffff05;border-top:1px solid var(--border-color)}.summary-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.summary-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.summary-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.summary-label[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary-color)}.summary-value[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-color)}.cart-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:24px;background:#ffffff05;border-top:1px solid var(--border-color)}.action-btn[_ngcontent-%COMP%]{flex:1;height:48px;font-size:1rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px}@media (max-width: 768px){.cart-container[_ngcontent-%COMP%]{margin:16px auto;border-radius:8px}.cart-title[_ngcontent-%COMP%]{padding:20px 20px 12px;font-size:1.3rem;gap:8px}.cart-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.cart-count-badge[_ngcontent-%COMP%]{font-size:.8rem;margin-left:0;width:100%;text-align:center;margin-top:4px}.debug-info[_ngcontent-%COMP%]{margin:8px!important;padding:8px!important;font-size:.8rem}.cart-item[_ngcontent-%COMP%]{padding:20px 24px;min-height:200px}.cart-item-content[_ngcontent-%COMP%], .item-info[_ngcontent-%COMP%]{gap:12px}.cart-book-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.cart-item-title[_ngcontent-%COMP%]{font-size:1rem}.item-price[_ngcontent-%COMP%]{font-size:.85rem}.item-isbn[_ngcontent-%COMP%]{font-size:.75rem}.item-controls[_ngcontent-%COMP%]{gap:10px}.qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px;min-height:32px}.cart-qty-number[_ngcontent-%COMP%]{min-width:36px;font-size:.95rem;padding:6px 10px}.remove-btn[_ngcontent-%COMP%]{height:36px;font-size:.9rem}.item-divider[_ngcontent-%COMP%]{margin:0 20px}.empty-cart[_ngcontent-%COMP%]{padding:40px 20px}.empty-cart-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:20px}.browse-btn[_ngcontent-%COMP%]{height:44px;font-size:.95rem;padding:0 20px}.cart-summary[_ngcontent-%COMP%]{padding:16px 20px}.summary-content[_ngcontent-%COMP%]{gap:10px}.summary-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.summary-label[_ngcontent-%COMP%]{font-size:.95rem}.summary-value[_ngcontent-%COMP%]{font-size:1rem}.cart-actions[_ngcontent-%COMP%]{flex-direction:column;gap:10px;padding:20px}.action-btn[_ngcontent-%COMP%]{height:44px;font-size:.95rem}}@media (max-width: 480px){.cart-container[_ngcontent-%COMP%]{margin:12px auto;border-radius:6px}.cart-title[_ngcontent-%COMP%]{padding:16px 16px 10px;font-size:1.2rem;gap:6px}.cart-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}.cart-count-badge[_ngcontent-%COMP%]{font-size:.75rem}.cart-item[_ngcontent-%COMP%]{padding:12px 16px;min-height:150px}.cart-item-content[_ngcontent-%COMP%], .item-info[_ngcontent-%COMP%]{gap:10px}.cart-book-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.cart-item-title[_ngcontent-%COMP%]{font-size:.95rem}.item-price[_ngcontent-%COMP%]{font-size:.8rem}.item-isbn[_ngcontent-%COMP%]{font-size:.7rem}.item-controls[_ngcontent-%COMP%]{gap:8px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px;min-height:28px}.cart-qty-number[_ngcontent-%COMP%]{min-width:32px;font-size:.9rem;padding:4px 8px}.remove-btn[_ngcontent-%COMP%]{height:32px;font-size:.85rem}.btn-text[_ngcontent-%COMP%]{font-size:.85rem}.item-divider[_ngcontent-%COMP%]{margin:0 16px}.empty-cart[_ngcontent-%COMP%]{padding:30px 16px}.empty-cart-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;margin-bottom:10px}.empty-cart-msg[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:16px}.browse-btn[_ngcontent-%COMP%]{height:40px;font-size:.9rem;padding:0 16px}.cart-summary[_ngcontent-%COMP%]{padding:12px 16px}.summary-content[_ngcontent-%COMP%]{gap:8px}.summary-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.summary-label[_ngcontent-%COMP%]{font-size:.9rem}.summary-value[_ngcontent-%COMP%]{font-size:.95rem}.cart-actions[_ngcontent-%COMP%]{padding:16px;gap:8px}.action-btn[_ngcontent-%COMP%]{height:40px;font-size:.9rem}}@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape){.item-controls[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.cart-item[_ngcontent-%COMP%]{min-height:180px}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){.cart-container[_ngcontent-%COMP%]{box-shadow:0 2px 10px #0000004d}}"]})};var at=[{path:"",component:g}],W=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=I({type:o});static \u0275inj=P({imports:[C,M.forChild(at),b,y,g]})};export{W as CartModule};
